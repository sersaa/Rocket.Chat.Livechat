(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{Kl3u:function(e,r,t){"use strict";(function(e){t.d(r,"b",function(){return h}),t.d(r,"a",function(){return m});var n=t("gDde"),a=t("qPgm"),o=t("vBLd"),i=t("kQFM"),l=t("VCjn"),u=t("81xT"),s=t("PyG4");function c(){return(c=Object.assign||function(e){for(var r=1;arguments.length>r;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var h=function(r){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),h=0;n>h;h++)i[h]=arguments[h];return f(d(t=r.call.apply(r,[this].concat(i))||this),"handleSubmit",function(e){return new Promise(function(r,n){var i,l,c,d,f,h,m=function(e){return function(r){try{return Promise.resolve(c({loading:!1})).then(function(){try{return e&&e.call(this,r)}catch(e){return n(e)}}.bind(this),n)}catch(e){return n(e)}}.bind(this)}.bind(this);return l=(i=t.props).alerts,c=i.dispatch,Promise.resolve(c({loading:!0})).then(function(){try{var t=function(e){try{return f=e.data.message,h={id:Object(s.e)(),children:f,error:!0,timeout:5e3},Promise.resolve(c({alerts:(l.push(h),l)})).then(function(){try{return m(r)(!1)}catch(e){return n(e)}},n)}catch(e){return m(n)(e)}};try{return d=Object(s.k)(e),Promise.resolve(a.a.sendOfflineMessage(d)).then(function(n){try{return Promise.resolve(u.a.alert({text:n})).then(function(){try{return Object(o.a)("callback",["offline-form-submit",e]),m(r)(!0)}catch(e){return t(e)}},t)}catch(e){return t(e)}},t)}catch(e){t(e)}}catch(e){return n(e)}},n)})}),f(d(t),"render",function(r){return e(l.a,c({},r,{onSubmit:t.handleSubmit}))}),t}return n=r,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n.Component),m=function(r){var t=r.ref,n=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;o.length>n;n++)0>r.indexOf(t=o[n])&&(a[t]=e[t]);return a}(r,["ref"]);return e(i.a,null,function(r){var a=r.config,o=(a=void 0===a?{}:a).departments,i=void 0===o?{}:o,l=a.messages;l=void 0===l?{}:l;var u=a.theme;u=void 0===u?{}:u;var s=a.settings;s=void 0===s?{}:s;var d=r.iframe,f=(d=void 0===d?{}:d).theme,m=(f=void 0===f?{}:f).offlineTitle;return e(h,c({ref:t},n,{theme:{color:u.offlineColor,offlineTitle:m},title:m||u.offlineTitle,message:l.offlineMessage,successMessage:l.offlineSuccessMessage,unavailableMessage:l.offlineUnavailableMessage,loading:r.loading,token:r.token,dispatch:r.dispatch,alerts:r.alerts,hasForm:s.displayOfflineForm,hasDepartmentField:i&&i.some(function(e){return e.showOnOfflineForm}),departments:i.filter(function(e){return e.showOnOfflineForm})}))})};r.c=m}).call(this,t("gDde").h)},VCjn:function(e,r,t){"use strict";(function(e,n){t.d(r,"a",function(){return w});var a=t("gDde"),o=t("co3k"),i=t("z4Qk"),l=t("qoM+"),u=t("jdJj"),s=t("PyG4"),c=t("8SHJ"),d=t.n(c);function f(){return(f=Object.assign||function(e){for(var r=1;arguments.length>r;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function m(e){for(var r=1;arguments.length>r;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(t,!0).forEach(function(r){p(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var b=e.t("Leave a message"),g=e.t("We are not online right now. Please, leave a message."),y="",O=n(u.b.Footer,null),w=function(r){var t,a;function c(t){var a;return p(v(a=r.call(this,t)||this),"validations",{name:[l.e.nonEmpty],email:[l.e.nonEmpty,l.e.email],department:[],message:[l.e.nonEmpty]}),p(v(a),"getDefaultState",function(){var e=a.props,r=e.departments,t=null;return e.hasDepartmentField&&r&&r.length>0&&(t={value:""}),{name:{value:""},email:{value:""},department:t,message:{value:""}}}),p(v(a),"getValidableFields",function(){return Object.keys(a.validations).map(function(e){return a.state[e]?m({fieldName:e},a.state[e]):null}).filter(Boolean)}),p(v(a),"validate",function(e){var r=e.value;return a.validations[e.name].reduce(function(e,t){return e||t({value:r})},void 0)}),p(v(a),"validateAll",function(){var e=a.getValidableFields(),r=Array.isArray(e),t=0;for(e=r?e:e[Symbol.iterator]();;){var n,o;if(r){if(t>=e.length)break;o=e[t++]}else{if((t=e.next()).done)break;o=t.value}var i=o.fieldName,l=o.value,u=a.validate({name:i,value:l});a.setState(((n={})[i]=m({},a.state[i],{value:l,error:u,showError:!1}),n))}}),p(v(a),"reset",function(){return a.setState(a.getDefaultState())}),p(v(a),"isValid",function(){return a.getValidableFields().every(function(e){return!(void 0===e?{}:e).error})}),p(v(a),"handleFieldChange",function(e){return function(r){var t,n=r.target.value,o=a.validate({name:e,value:n});a.setState(((t={})[e]=m({},a.state[e],{value:n,error:o,showError:!1}),t))}}),p(v(a),"handleNameChange",a.handleFieldChange("name")),p(v(a),"handleEmailChange",a.handleFieldChange("email")),p(v(a),"handleDepartmentChange",a.handleFieldChange("department")),p(v(a),"handleMessageChange",a.handleFieldChange("message")),p(v(a),"handleSubmit",function(e){return new Promise(function(r,t){var n;if(e.preventDefault(),a.props.onSubmit)return n=Object.entries(a.state).filter(function(e){return null!==e[1]}).map(function(e){var r;return(r={})[e[0]]=e[1].value,r}).reduce(function(e,r){return m({},e,{},r)},{}),Promise.resolve(a.props.onSubmit(n)).then(function(e){try{return e&&a.reset(),o.call(this)}catch(e){return t(e)}}.bind(this),t);function o(){return r()}return o.call(this)})}),p(v(a),"renderForm",function(r,t){var u=r.loading,c=r.departments,d=r.valid,f=void 0===d?a.isValid():d,h=t.name,m=t.email,v=t.department,p=t.message;return n(l.a,{onSubmit:a.handleSubmit},h?n(l.b,{required:!0,label:e.t("Name"),error:h.showError&&h.error},n(l.d,{name:"name",value:h.value,placeholder:e.t("Insert your %{field} here...",{field:e.t("Name")}),disabled:u,onInput:a.handleNameChange})):null,m?n(l.b,{required:!0,label:e.t("Email"),error:m.showError&&m.error},n(l.d,{name:"email",value:m.value,placeholder:e.t("Insert your %{field} here...",{field:e.t("Email")}),disabled:u,onInput:a.handleEmailChange})):null,v?n(l.b,{label:e.t("I need help with..."),error:v.showError&&v.error},n(l.c,{name:"department",value:v.value,options:Object(s.m)(c,"name").map(function(e){return{value:e._id,label:e.name}}),placeholder:e.t("Choose an option..."),disabled:u,error:v.showError,onInput:a.handleDepartmentChange})):null,p?n(l.b,{required:!0,label:e.t("Message"),error:p.showError&&p.error},n(l.d,{name:"message",value:p.value,multiline:!0,rows:4,placeholder:e.t("Write your message..."),disabled:u,error:p.showError,onInput:a.handleMessageChange})):null,n(i.a,null,n(o.a,{submit:!0,loading:u,disabled:!f||u,stack:!0},e.t("Send"))))}),p(v(a),"render",function(e){var r=e.color,t=e.title,o=e.message,i=e.unavailableMessage,l=e.hasForm,c=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;o.length>n;n++)0>r.indexOf(t=o[n])&&(a[t]=e[t]);return a}(e,["color","title","message","unavailableMessage","hasForm"]);return n(u.b,f({color:r,title:t||b,className:Object(s.d)(d.a,"leave-message")},c),n(u.b.Content,null,n("p",{className:Object(s.d)(d.a,"leave-message__main-message")},l?o||g:i||y),l&&a.renderForm(a.props,a.state)),O)}),a.setState(a.getDefaultState()),a.validateAll(),a}return a=r,(t=c).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,c}(a.Component)}).call(this,t("fsQa").default,t("gDde").h)},ag5X:function(e,r,t){"use strict";t.r(r);var n=t("VCjn");t.d(r,"LeaveMessage",function(){return n.a});var a=t("Kl3u");t.d(r,"LeaveMessageContainer",function(){return a.b}),t.d(r,"LeaveMessageConnector",function(){return a.a}),t.d(r,"default",function(){return a.c})}}]);